<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="index.css" />
  </head>
  <body>
    <div class="user-form">
      <h2>User Information</h2>
      <form id="signup">
        <table>
          <tr class="form-email">
            <td>
              Email:
            </td>
            <td>
              <input type="text" id="email" placeholder="Email" />
            </td>
          </tr>
          <tbody>
            <tr class="form-dateOfBirth">
              <td>
                Date of Birth:
              </td>
              <td>
                <input type="text" id="dateOfBirth" placeholder="DOB" />
              </td>
            </tr>
            <tr class="form-mobileNumber">
              <td>
                Mobile Number:
              </td>
              <td>
                <input
                  type="number"
                  id="mobileNumber"
                  placeholder="Mobile Number"
                />
              </td>
            </tr>
            <tr class="form-city">
              <td>
                City:
              </td>
              <td>
                <input type="text" id="city" placeholder="City" />
              </td>
            </tr>
            <tr class="form-monthlyIncome">
              <td>
                Monthly Income:
              </td>
              <td>
                <input
                  type="number"
                  id="monthlyIncome"
                  placeholder="Monthly Incomer"
                />
              </td>
            </tr>
            <tr class="form-loanAmount">
              <td>
                Loan Amount:
              </td>
              <td>
                <input
                  type="number"
                  id="loanAmount"
                  placeholder="Loan Amount"
                />
              </td>
            </tr>
            <tr class="form-submit">
              <td>
                <button type="button" class="btn btn-info" id="previewdata">
                  Preview
                </button>
              </td>
              <td>
                <button type="button" class="btn btn-success" id="submitdata">
                  Submit
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </form>
    </div>
  </body>
  <script>
    $(document).ready(function() {
      //var url = "https://testrestapifordemo.herokuapp.com/userRegistration";
      var url = "http://localhost:3000/userRegistration";
      $("#previewdata").click(function() {
        var user = {
          email: $("#email").val(),
          dateOfBirth: $("#dateOfBirth").val(),
          loanAmount: $("#loanAmount").val(),
          mobileNumber: $("#mobileNumber").val(),
          monthlyIncome: $("#monthlyIncome").val(),
          city: $("#city").val()
        };
        alert(
          "Preview \n Email : " +
            user.email +
            "\n Birth Date : " +
            user.dateOfBirth +
            "\n Loan amount : " +
            user.loanAmount +
            "\n Mobile Number : " +
            user.mobileNumber +
            "\n Monthly Income : " +
            user.monthlyIncome +
            "\n City : " +
            user.city
        );
      });
      $("#submitdata").click(function() {
        var user = {
          email: $("#email").val(),
          dateOfBirth: $("#dateOfBirth").val(),
          loanAmount: $("#loanAmount").val(),
          mobileNumber: $("#mobileNumber").val(),
          monthlyIncome: $("#monthlyIncome").val(),
          city: $("#city").val()
        };
        var registerData = $.ajax({
          url: url,
          type: "POST",
          data: user,
          dataType: "json",
          async: false,
          error: function(error) {
            console.log("error", error);
          }
        }).responseJSON;
        if (registerData.success === true) {
          alert(
            "Registration successfull \n email : " + registerData.data.email
          );
        } else {
          alert(registerData.message);
        }
        $("#signup").trigger("reset");
      });
    });
  </script>
</html>
